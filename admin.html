<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>لوحة الأدمن</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<header>
  <h1>لوحة تحكم الأدمن</h1>
  <p>إدارة الطلبات</p>
</header>

<section class="cards" id="box"></section>

<script>
if(localStorage.getItem("role") !== "admin"){
  alert("غير مصرح");
  location.href="index.html";
}

let reqs = JSON.parse(localStorage.getItem("requests") || "[]");
let box = document.getElementById("box");

if(reqs.length === 0){
  box.innerHTML = "<p style='padding:20px'>لا توجد طلبات</p>";
}

reqs.forEach((r,i)=>{
  box.innerHTML += `
    <div class="card">
      <h3>${r.game}</h3>
      <p>${r.desc}</p>
      <button onclick="accept(${i})">قبول</button>
      <button onclick="reject(${i})">رفض</button>
    </div>
  `;
});

function accept(i){
  reqs[i].status="accepted";
  localStorage.setItem("requests",JSON.stringify(reqs));
  alert("تم قبول الطلب");
  location.reload();
}

function reject(i){
  reqs.splice(i,1);
  localStorage.setItem("requests",JSON.stringify(reqs));
  alert("تم رفض الطلب");
  location.reload();
}
</script>

</body>
</html>