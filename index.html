<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„ÙˆØ³ÙŠØ· Ù„Ù„Ø£Ù…Ø§Ù†</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- Ø²Ø± Ø§Ù„Ù…Ù†ÙŠÙˆ -->
<div class="menu" onclick="toggle()">â˜°</div>

<!-- Ù…Ù†ÙŠÙˆ Ø¬Ø§Ù†Ø¨ÙŠ -->
<div class="side" id="side">
  <a href="index.html">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  <a href="profile.html">ğŸ‘¤ Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„</a>
  <a href="publish.html">â• Ù†Ø´Ø± Ø­Ø³Ø§Ø¨</a>
  <a href="payment.html">ğŸ’³ Ø§Ù„Ø¯ÙØ¹</a>
  <a href="admin.html" id="adminLink">ğŸ›  Ø§Ù„Ø£Ø¯Ù…Ù†</a>
  <a href="login.html">ğŸ” ØªØ³Ø¬ÙŠÙ„</a>
</div>

<!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
<header>
  <h1>Ø§Ù„ÙˆØ³ÙŠØ· Ù„Ù„Ø£Ù…Ø§Ù†</h1>
  <p id="welcome"></p>
</header>

<!-- Ø²Ø± Ø¥Ø¶Ø§ÙØ© -->
<div style="text-align:center;margin:20px">
  <button class="btn" onclick="goPublish()">ï¼‹ Ù†Ø´Ø± Ø­Ø³Ø§Ø¨</button>
</div>

<!-- Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª -->
<section class="cards" id="cards"></section>

<script>
/* Ù…Ù†ÙŠÙˆ */
function toggle(){
 document.getElementById("side").classList.toggle("active");
}

/* ØªØ±Ø­ÙŠØ¨ */
let user = localStorage.getItem("currentUser");
let role = localStorage.getItem("role");
welcome.innerText = user ? "Ù…Ø±Ø­Ø¨Ù‹Ø§ "+user : "Ø³Ø¬Ù„ Ø­Ø³Ø§Ø¨Ùƒ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª";

/* Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø¯Ù…Ù† */
if(role !== "admin"){
 document.getElementById("adminLink").style.display="none";
}

/* Ù†Ø´Ø± */
function goPublish(){
 if(!user){
  alert("Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹");
  location.href="login.html";
 }else{
  location.href="publish.html";
 }
}

/* Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª */
let store = JSON.parse(localStorage.getItem("store") || "[]");
let cards = document.getElementById("cards");

if(store.length === 0){
 cards.innerHTML = "<p style='padding:20px'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ø¹Ø±ÙˆØ¶Ø©</p>";
}else{
 store.forEach(s=>{
  cards.innerHTML += `
   <div class="card">
    <h3>${s.game}</h3>
    <p>${s.desc}</p>
    <button class="btn" onclick="buy()">Ø´Ø±Ø§Ø¡</button>
   </div>
  `;
 });
}

function buy(){
 if(!user){
  alert("Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø´Ø±Ø§Ø¡");
  location.href="login.html";
 }else{
  location.href="payment.html";
 }
}
</script>

</body>
</html>