<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeTrust | Ù…Ù†ØµØ© Ø§Ù„ÙˆØ³Ø§Ø·Ø© Ø§Ù„ÙƒØ¨Ø±Ù‰</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background: #0b0e14; color: #fff; }
       .glass { background: rgba(17, 25, 40, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); }
       .admin-glow { border: 2px solid #ef4444; box-shadow: 0 0 15px rgba(239, 68, 68, 0.3); }
       .pending-tag { background: #f59e0b; color: #000; font-size: 0.7rem; padding: 2px 8px; border-radius: 4px; font-weight: bold; }
        input, textarea { background: #161b22!important; border: 1px solid #30363d!important; color: white!important; }
        input:focus { border-color: #3b82f6!important; outline: none; }
    </style>
</head>
<body class="min-h-screen">

    <nav class="glass sticky top-0 z-50 p-4 border-b border-gray-800">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-black text-blue-500">SAFE<span class="text-white">TRUST</span></h1>
            <div id="userHeader" class="flex items-center gap-4">
                <span id="userNameDisplay" class="hidden text-sm font-bold bg-blue-900 px-4 py-1 rounded-full"></span>
                <button onclick="logout()" id="logoutBtn" class="hidden text-red-500 text-xs font-bold uppercase">Ø®Ø±ÙˆØ¬</button>
            </div>
        </div>
    </nav>

    <div id="authBox" class="max-w-md mx-auto mt-20 p-8 glass rounded-3xl shadow-2xl">
        <h2 class="text-2xl font-black mb-6 text-center">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ÙˆØ³ÙŠØ· Ø§Ù„Ø¢Ù…Ù†</h2>
        <div class="space-y-4">
            <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Younisxho Ù„Ù„Ø¢Ø¯Ù…Ù†)" class="w-full p-4 rounded-xl">
            <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full p-4 rounded-xl">
            <button onclick="login()" class="w-full bg-blue-600 hover:bg-blue-700 p-4 rounded-xl font-bold text-lg transition">Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù…</button>
        </div>
    </div>

    <div id="dashboard" class="hidden max-w-6xl mx-auto mt-10 p-4">
        <div class="flex flex-col md:flex-row gap-8">
            
            <aside class="w-full md:w-64 space-y-3">
                <button onclick="switchTab('market')" id="tabMarketBtn" class="w-full text-right p-4 rounded-xl font-bold bg-blue-600">ğŸ›’ Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</button>
                <button onclick="switchTab('sell')" id="tabSellBtn" class="w-full text-right p-4 rounded-xl font-bold hover:bg-gray-800">â• Ø¹Ø±Ø¶ Ø­Ø³Ø§Ø¨ Ù„Ù„Ø¨ÙŠØ¹</button>
                
                <div id="adminPanel" class="hidden pt-6 border-t border-gray-800 mt-6 animate-pulse">
                    <p class="text-red-500 text-xs font-black mb-3 px-2">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (Younisxho)</p>
                    <button onclick="switchTab('admin')" id="tabAdminBtn" class="w-full text-right p-4 rounded-xl font-bold bg-red-900/20 text-red-400 border border-red-900">ğŸ›¡ Ø¥Ø¯Ø§Ø±Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨ÙŠØ¹</button>
                </div>
            </aside>

            <main class="flex-1">
                
                <section id="marketView" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    </section>

                <section id="sellView" class="hidden glass p-8 rounded-3xl">
                    <h2 class="text-xl font-bold mb-6">ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨ Ø¨ÙŠØ¹ Ø­Ø³Ø§Ø¨</h2>
                    <div class="space-y-4">
                        <input type="text" id="gameName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø©" class="w-full p-3 rounded-xl">
                        <input type="text" id="accEmail" placeholder="Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ (Ù„Ù„ÙØ­Øµ ÙÙ‚Ø·)" class="w-full p-3 rounded-xl text-left" dir="ltr">
                        <input type="password" id="accPass" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø³Ø§Ø¨ (Ù„Ù„ÙØ­Øµ ÙÙ‚Ø·)" class="w-full p-3 rounded-xl text-left" dir="ltr">
                        <textarea id="accDesc" placeholder="ÙˆØµÙ Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ØŒ Ø§Ù„Ø³ÙƒÙ†Ø§ØªØŒ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª)" rows="4" class="w-full p-3 rounded-xl"></textarea>
                        <input type="number" id="accPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ($)" class="w-full p-3 rounded-xl">
                        <button onclick="sendForReview()" class="w-full bg-green-600 p-4 rounded-xl font-bold text-lg">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ (Ù…Ø±Ø§Ø¬Ø¹Ø© Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©)</button>
                    </div>
                </section>

                <section id="adminView" class="hidden space-y-4">
                    <h2 class="text-xl font-bold text-red-500">Ø·Ù„Ø¨Ø§Øª ØªØ­ØªØ§Ø¬ Ø§Ø®ØªØ¨Ø§Ø±Ùƒ ÙŠØ§ Younisxho</h2>
                    <div id="pendingList" class="space-y-4">
                        </div>
                </section>

            </main>
        </div>
    </div>

    <script>
        // --- Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Database) ---
        let accounts = JSON.parse(localStorage.getItem('st_accounts')) ||;
        let currentUser = null;

        const ADMIN_NAME = "Younisxho";

        function login() {
            const user = document.getElementById('username').value.trim();
            if(!user) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙŠÙˆØ²Ø±");
            
            currentUser = user;
            document.getElementById('authBox').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            document.getElementById('userNameDisplay').innerText = "ğŸ‘¤ " + user;
            document.getElementById('userNameDisplay').classList.remove('hidden');
            document.getElementById('logoutBtn').classList.remove('hidden');

            if(user === ADMIN_NAME) {
                document.getElementById('adminPanel').classList.remove('hidden');
                document.getElementById('userNameDisplay').classList.add('admin-glow');
            }
            renderTabs();
        }

        function switchTab(tab) {
            ['marketView', 'sellView', 'adminView'].forEach(v => document.getElementById(v).classList.add('hidden'));
           .forEach(b => document.getElementById(b)?.classList.remove('bg-blue-600', 'bg-red-900/40'));
            
            if(tab === 'market') {
                document.getElementById('marketView').classList.remove('hidden');
                document.getElementById('tabMarketBtn').classList.add('bg-blue-600');
                renderMarket();
            } else if(tab === 'sell') {
                document.getElementById('sellView').classList.remove('hidden');
                document.getElementById('tabSellBtn').classList.add('bg-blue-600');
            } else if(tab === 'admin') {
                document.getElementById('adminView').classList.remove('hidden');
                document.getElementById('tabAdminBtn').classList.add('bg-red-900/40');
                renderAdminList();
            }
        }

        function sendForReview() {
            const game = document.getElementById('gameName').value;
            const email = document.getElementById('accEmail').value;
            const pass = document.getElementById('accPass').value;
            const desc = document.getElementById('accDesc').value;
            const price = document.getElementById('accPrice').value;

            if(!game ||!email ||!pass ||!price) return alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ ÙƒØ§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ© ÙˆØ§Ù„ÙˆØµÙ");

            const request = {
                id: Date.now(),
                seller: currentUser,
                game: game,
                email: email,
                pass: pass,
                desc: desc,
                price: price,
                status: 'pending',
                time: new Date().toLocaleString()
            };

            accounts.push(request);
            saveData();
            alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨. Ø³ÙŠÙ‚ÙˆÙ… Younisxho Ø¨ÙØ­Øµ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©.");
            switchTab('market');
        }

        function approve(id) {
            const acc = accounts.find(a => a.id === id);
            if(acc) {
                acc.status = 'approved';
                saveData();
                renderAdminList();
                renderMarket();
                alert("âœ¨ ØªÙ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ©.");
            }
        }

        function deleteAcc(id) {
            accounts = accounts.filter(a => a.id!== id);
            saveData();
            renderAdminList();
            renderMarket();
        }

        function renderMarket() {
            const cont = document.getElementById('marketView');
            const approved = accounts.filter(a => a.status === 'approved');
            cont.innerHTML = approved.map(a => `
                <div class="glass p-6 rounded-2xl border-l-4 border-blue-500 hover:scale-[1.01] transition">
                    <div class="flex justify-between items-start mb-3">
                        <span class="text-xs text-gray-400">Ø¨Ø§Ø¦Ø¹: ${a.seller}</span>
                        <span class="text-green-400 font-black text-xl">$${a.price}</span>
                    </div>
                    <h3 class="font-bold text-lg mb-2">${a.game}</h3>
                    <p class="text-gray-400 text-sm mb-4 leading-relaxed">${a.desc}</p>
                    <button class="w-full bg-blue-600/20 text-blue-400 py-3 rounded-xl font-bold border border-blue-500/30">Ø´Ø±Ø§Ø¡ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ³ÙŠØ·</button>
                </div>
            `).join('') |

| "<p class='text-gray-500'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ø¹Ø±ÙˆØ¶Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</p>";
        }

        function renderAdminList() {
            const cont = document.getElementById('pendingList');
            const pending = accounts.filter(a => a.status === 'pending');
            cont.innerHTML = pending.map(a => `
                <div class="glass p-6 rounded-2xl border-r-4 border-red-500">
                    <div class="flex justify-between items-center mb-4">
                        <span class="pending-tag">ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø±Ùƒ ÙŠØ§ Younisxho</span>
                        <span class="text-xs text-gray-500">${a.time}</span>
                    </div>
                    <h3 class="font-bold text-lg">${a.game} - Ø§Ù„Ø³Ø¹Ø±: $${a.price}</h3>
                    <div class="my-4 bg-black/40 p-4 rounded-xl border border-gray-700 text-sm font-mono">
                        <p class="text-blue-400">ğŸ‘¤ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„: ${a.email}</p>
                        <p class="text-red-400">ğŸ”‘ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯: ${a.pass}</p>
                        <p class="mt-2 text-gray-300">ğŸ“ Ø§Ù„ÙˆØµÙ: ${a.desc}</p>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="approve(${a.id})" class="flex-1 bg-green-600 p-3 rounded-lg font-bold">Ø¹Ø±Ø¶ ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
                        <button onclick="deleteAcc(${a.id})" class="flex-1 bg-gray-800 p-3 rounded-lg font-bold">Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨</button>
                    </div>
                </div>
            `).join('') |

| "<p class='text-green-500'>ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù†Ø¸ÙŠÙØ©! Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…Ø¹Ù„Ù‚Ø©.</p>";
        }

        function saveData() { localStorage.setItem('st_accounts', JSON.stringify(accounts)); }
        function logout() { location.reload(); }
        function renderTabs() { renderMarket(); renderAdminList(); }
    </script>
</body>
</html>
