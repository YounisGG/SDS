<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeTrust | Ù…Ù†ØµØ© ÙŠÙˆÙ†Ø³ Ù„Ù„ÙˆØ³Ø§Ø·Ø©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background: #05070a; color: #fff; overflow-x: hidden; }
        .glass { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.05); }
        .admin-border { border: 2px solid #ef4444 !important; }
        .status-pending { color: #f59e0b; background: rgba(245, 158, 11, 0.1); padding: 2px 8px; border-radius: 5px; }
        .input-style { background: #0f172a; border: 1px solid #334155; padding: 12px; border-radius: 12px; width: 100%; color: white; }
        .input-style:focus { border-color: #3b82f6; outline: none; }
    </style>
</head>
<body class="min-h-screen">

    <nav class="glass sticky top-0 z-50 p-4 border-b border-gray-800">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-black text-blue-500">SAFE<span class="text-white">TRUST</span></h1>
            <div id="navActions" class="flex items-center gap-4">
                <span id="userBadge" class="hidden text-sm font-bold bg-gray-800 px-4 py-1 rounded-full"></span>
                <button id="logoutBtn" onclick="logout()" class="hidden text-red-500 text-sm font-bold">Ø®Ø±ÙˆØ¬</button>
            </div>
        </div>
    </nav>

    <div id="authPanel" class="max-w-md mx-auto mt-20 p-8 glass rounded-3xl shadow-2xl">
        <h2 id="authTitle" class="text-2xl font-black mb-6 text-center">Ø§Ù†Ø¶Ù… ÙƒÙ€ ÙˆØ³ÙŠØ·</h2>
        <div class="space-y-4">
            <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" class="input-style">
            <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="input-style">
            <button onclick="handleAuth()" class="w-full bg-blue-600 hover:bg-blue-700 p-4 rounded-xl font-bold text-lg transition">Ø¯Ø®ÙˆÙ„ / ØªØ³Ø¬ÙŠÙ„</button>
        </div>
    </div>

    <div id="mainApp" class="hidden max-w-6xl mx-auto mt-10 p-4">
        
        <div class="flex flex-col md:flex-row gap-6">
            <aside class="w-full md:w-64 space-y-2">
                <button onclick="showSection('market')" id="tabMarket" class="w-full text-right p-4 rounded-xl font-bold bg-blue-600">ğŸ›’ Ø³ÙˆÙ‚ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</button>
                <button onclick="showSection('sell')" id="tabSell" class="w-full text-right p-4 rounded-xl font-bold hover:bg-gray-800">â• Ø¹Ø±Ø¶ Ø­Ø³Ø§Ø¨ÙŠ Ù„Ù„Ø¨ÙŠØ¹</button>
                <div id="adminMenu" class="hidden pt-6 border-t border-gray-800 mt-6">
                    <p class="text-red-500 text-xs font-black mb-2 px-2">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Younisxho</p>
                    <button onclick="showSection('admin')" id="tabAdmin" class="w-full text-right p-4 rounded-xl font-bold bg-red-900/30 text-red-400 border border-red-900">ğŸ›¡ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
                </div>
            </aside>

            <main class="flex-1">
                
                <section id="secMarket" class="space-y-4">
                    <h2 class="text-xl font-bold mb-4">Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</h2>
                    <div id="marketContainer" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        </div>
                </section>

                <section id="secSell" class="hidden glass p-8 rounded-3xl animate-fade-in">
                    <h2 class="text-xl font-bold mb-6">ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨ Ø¨ÙŠØ¹ Ø­Ø³Ø§Ø¨</h2>
                    <div class="space-y-4">
                        <input type="text" id="gameTitle" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø© (Ù…Ø«Ù„Ø§Ù‹: PUBG Mobile)" class="input-style">
                        <textarea id="gameDetails" placeholder="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ØŒ Ø§Ù„Ø³ÙƒÙ†Ø§ØªØŒ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ØŒ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯)" rows="4" class="input-style"></textarea>
                        <input type="number" id="gamePrice" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ($)" class="input-style">
                        <button onclick="submitAccount()" class="w-full bg-green-600 p-4 rounded-xl font-bold text-lg">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</button>
                        <p class="text-xs text-gray-400 text-center">Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ù‚Ø¨Ù„ Younisxho Ù‚Ø¨Ù„ Ø§Ù„Ù†Ø´Ø±.</p>
                    </div>
                </section>

                <section id="secAdmin" class="hidden space-y-4">
                    <h2 class="text-xl font-bold text-red-500">Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù‚Ø© (ØªØ­ØªØ§Ø¬ Ù…ÙˆØ§ÙÙ‚ØªÙƒ)</h2>
                    <div id="adminQueue" class="space-y-4">
                        </div>
                </section>

            </main>
        </div>
    </div>

    <script>
        // --- Database Logic ---
        let accounts = JSON.parse(localStorage.getItem('trust_accounts')) || [];
        let users = JSON.parse(localStorage.getItem('trust_users')) || [];
        let currentUser = null;

        const ADMIN_USER = "Younisxho";

        function handleAuth() {
            const user = document.getElementById('username').value.trim();
            const pass = document.getElementById('password').value.trim();

            if(!user || !pass) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");

            // Simple login/register logic
            currentUser = user;
            document.getElementById('authPanel').style.display = 'none';
            document.getElementById('mainApp').classList.remove('hidden');
            document.getElementById('userBadge').innerText = user;
            document.getElementById('userBadge').classList.remove('hidden');
            document.getElementById('logoutBtn').classList.remove('hidden');

            if(user === ADMIN_USER) {
                document.getElementById('adminMenu').classList.remove('hidden');
                document.getElementById('userBadge').classList.add('admin-border');
            }
            
            renderMarket();
            renderAdminQueue();
        }

        function showSection(name) {
            document.getElementById('secMarket').classList.add('hidden');
            document.getElementById('secSell').classList.add('hidden');
            document.getElementById('secAdmin').classList.add('hidden');
            
            if(name === 'market') document.getElementById('secMarket').classList.remove('hidden');
            if(name === 'sell') document.getElementById('secSell').classList.remove('hidden');
            if(name === 'admin') document.getElementById('secAdmin').classList.remove('hidden');
        }

        function submitAccount() {
            const title = document.getElementById('gameTitle').value;
            const details = document.getElementById('gameDetails').value;
            const price = document.getElementById('gamePrice').value;

            if(!title || !details || !price) return alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ ÙƒØ§ÙØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„");

            const newAcc = {
                id: Date.now(),
                seller: currentUser,
                title: title,
                details: details,
                price: price,
                status: 'pending' // pending = waiting for Younisxho
            };

            accounts.push(newAcc);
            saveData();
            alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø­Ø³Ø§Ø¨Ùƒ! Ø§Ù†ØªØ¸Ø± Ù…Ø±Ø§Ø¬Ø¹Ø© Younisxho.");
            showSection('market');
            renderAdminQueue();
        }

        // --- Younisxho Control Functions ---
        function approveAccount(id) {
            const acc = accounts.find(a => a.id === id);
            if(acc) {
                acc.status = 'approved';
                saveData();
                renderMarket();
                renderAdminQueue();
                alert("ØªÙ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© ÙˆÙ†Ø´Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚!");
            }
        }

        function deleteAccount(id) {
            accounts = accounts.filter(a => a.id !== id);
            saveData();
            renderMarket();
            renderAdminQueue();
        }

        function renderMarket() {
            const container = document.getElementById('marketContainer');
            container.innerHTML = "";
            
            const approvedOnes = accounts.filter(a => a.status === 'approved');
            
            if(approvedOnes.length === 0) {
                container.innerHTML = "<p class='text-gray-500'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ø¹Ø±ÙˆØ¶Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</p>";
            }

            approvedOnes.forEach(acc => {
                container.innerHTML += `
                    <div class="glass p-6 rounded-2xl border-r-4 border-blue-500">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-xs bg-blue-900 px-2 py-1 rounded">Ø¨ÙˆØ§Ø³Ø·Ø©: ${acc.seller}</span>
                            <span class="font-bold text-green-400">$${acc.price}</span>
                        </div>
                        <h3 class="font-bold text-lg mb-2">${acc.title}</h3>
                        <p class="text-sm text-gray-400 mb-4 truncate">${acc.details}</p>
                        <button class="w-full bg-blue-600 py-2 rounded-lg font-bold text-sm">Ø´Ø±Ø§Ø¡ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ³ÙŠØ·</button>
                    </div>
                `;
            });
        }

        function renderAdminQueue() {
            const queue = document.getElementById('adminQueue');
            queue.innerHTML = "";
            
            const pendingOnes = accounts.filter(a => a.status === 'pending');
            
            pendingOnes.forEach(acc => {
                queue.innerHTML += `
                    <div class="glass p-6 rounded-2xl border-r-4 border-yellow-500">
                        <div class="mb-4">
                            <p class="text-xs text-yellow-500 font-bold mb-1">Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù†: ${acc.seller}</p>
                            <h3 class="font-bold text-lg">${acc.title} - <span class="text-green-400">$${acc.price}</span></h3>
                            <div class="bg-black/40 p-3 rounded-lg mt-2 text-sm text-gray-300 font-mono">
                                <strong>Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ©:</strong><br> ${acc.details}
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="approveAccount(${acc.id})" class="flex-1 bg-green-600 py-2 rounded-lg font-bold">Ù…ÙˆØ§ÙÙ‚Ø© ÙˆÙ†Ø´Ø±</button>
                            <button onclick="deleteAccount(${acc.id})" class="flex-1 bg-red-600 py-2 rounded-lg font-bold">Ø±ÙØ¶ ÙˆØ­Ø°Ù</button>
                        </div>
                    </div>
                `;
            });
        }

        function saveData() {
            localStorage.setItem('trust_accounts', JSON.stringify(accounts));
        }

        function logout() {
            location.reload();
        }
    </script>
</body>
</html>
