<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ุงููุณูุท ููุฃูุงู</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<header>
  <h1>ุงููุณูุท ููุฃูุงู</h1>
  <p>ููุตุฉ ููุซููุฉ ูุนุฑุถ ุงูุญุณุงุจุงุช ุจุฃูุงู</p>
</header>

<!-- ุฃูุณุงู ุงููููุน -->
<section class="section" id="homeSection">
  <h2>ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</h2>
  <p>ุชุตูุญ ุงูุญุณุงุจุงุช ุงููุนุฑูุถุฉ ุฃู ุณุฌู ุฏุฎููู/ุฃูุดุฆ ุญุณุงุจู.</p>
  <div class="cards"></div>
  <p id="noAccountsMsg" style="text-align:center;color:#888;font-weight:bold;">ูุง ุชูุฌุฏ ุญุณุงุจุงุช ุญุงููุงู</p>
</section>

<section class="section" id="accountsSection" style="display:none;">
  <h2>ุงูุญุณุงุจุงุช ุงููุชุงุญุฉ</h2>
  <div class="cards"></div>
</section>

<section class="section" id="profileSection" style="display:none;">
  <h2>ุงูููู ุงูุดุฎุตู</h2>
  <p id="profileInfo">ูู ุชุณุฌู ุงูุฏุฎูู ุจุนุฏ</p>
</section>

<!-- ุฒุฑ ูุดุฑ ุงูุญุณุงุจ -->
<button class="add-btn" onclick="location.href='publish.html'" id="addBtn">๏ผ</button>

<!-- ูููู ุณููู -->
<nav class="bottom-nav">
  <span onclick="showSection('home')">๐ ุงูุฑุฆูุณูุฉ</span>
  <span onclick="showSection('accounts')">๐ ุงูุญุณุงุจุงุช</span>
  <span onclick="showSection('profile')">๐ค ุงูููู ุงูุดุฎุตู</span>
</nav>

<script>
// ุนุฑุถ ุงูุญุณุงุจุงุช ุงูููุงูู ุนูููุง
function displayApproved(){
  let cardsDivs = document.querySelectorAll(".cards");
  let requests = JSON.parse(localStorage.getItem("requests")) || [];
  let approvedAccounts = requests.filter(r => r.approved);
  cardsDivs.forEach(cardsDiv=>{
    cardsDiv.innerHTML = "";
    approvedAccounts.forEach(r=>{
      let card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `<h3>${r.game}</h3><p>${r.desc}</p><button onclick="alert('ุนุฑุถ ุงูุชูุงุตูู')">ุนุฑุถ ุงูุชูุงุตูู</button>`;
      cardsDiv.appendChild(card);
    });
  });

  document.getElementById("noAccountsMsg").style.display = approvedAccounts.length === 0 ? "block" : "none";
}

// ุงูุชุญูู ูู ุงูุดุฎุทุงุช
function showSection(name){
  document.getElementById("homeSection").style.display = name==='home'?'block':'none';
  document.getElementById("accountsSection").style.display = name==='accounts'?'block':'none';
  document.getElementById("profileSection").style.display = name==='profile'?'block':'none';

  // ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู
  let currentUser = localStorage.getItem("currentUser") || "";
  document.getElementById("profileInfo").innerText = currentUser ? `ุฃูุช ูุณุฌู ุฏุฎูู ุจุงุณู: ${currentUser}` : "ูู ุชุณุฌู ุงูุฏุฎูู ุจุนุฏ";
}

// ุฒุฑ ุงููุดุฑ ูุธูุฑ ููุฃุฏูู ููุท
let currentUser = localStorage.getItem("currentUser") || "";
if(currentUser !== "Younisxho"){
  document.getElementById("addBtn").style.display = "none";
}

// ุนุฑุถ ุงูุญุณุงุจุงุช ุนูุฏ ุชุญููู ุงูุตูุญุฉ
window.onload = function(){
  displayApproved();
  showSection('home');
}
</script>

</body>
</html>